(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7800],{8247:function(e,t,r){"use strict";r.d(t,{U:function(){return c}});var n=r(8153),i=r(9154),o=r(5944),a=function(e){var t=e.as,r=void 0===t?"h2":t,n=e.children;return(0,o.tZ)(i.x,{as:r,fontSize:"md",fontWeight:"bold",children:n})},c=function(e){var t=e.as,r=e.background,i=void 0===r?"shade":r,c=e.children,l=e.title;return(0,o.BX)(n.kC,{as:t,flexDirection:"column",gap:1,background:i,padding:1.5,borderLeft:!0,borderLeftWidth:"xl",highContrastOutline:!0,children:[l?(0,o.tZ)(a,{children:l}):null,c]})}},3282:function(e,t,r){"use strict";r.d(t,{I:function(){return b},z:function(){return m}});var n=r(4942),i=r(5987),o=r(8153),a=r(8714),c=r(9065),l=r(8910),u=r(5944),s=["children"],d=["children"],f=["as","children","direction","className"];function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=function(e){var t=e.children,r=(0,i.Z)(e,s);return(0,u.tZ)(y,p(p({as:l.h},r),{},{children:t}))},b=function(e){var t=e.children,r=(0,i.Z)(e,d);return(0,u.tZ)(y,p(p({as:a.Yd},r),{},{children:t}))},g={name:"xyzkeb",styles:"align-self:flex-start"},y=function(e){var t=e.as,r=e.children,n=e.direction,a=e.className,c=(0,i.Z)(e,f),l=O[n],s="left"===n;return(0,u.BX)(o.kC,p(p({as:t,className:a,inline:!0,gap:.5,alignItems:"center",fontFamily:"body",fontWeight:"normal",link:!0,focus:!0,css:g},c),{},{children:[s?(0,u.tZ)(l,{size:"sm"}):null,r,s?null:(0,u.tZ)(l,{size:"sm"})]}))},O={up:c.Hf,right:c.LZ,down:c.ve,left:c.Y4}},6439:function(e,t,r){"use strict";r.d(t,{H1:function(){return h},H2:function(){return p},H3:function(){return m},H4:function(){return b},X:function(){return f}});var n=r(4942),i=r(5987),o=r(8169),a=r(8153),c=r(5944),l=["as","type","color","fontSize","fontFamily","fontWeight","lineHeight"];function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var d={h1:"xxl",h2:"xl",h3:"lg",h4:"md",h5:"sm",h6:"xs"},f=(0,o.yV)((function(e,t){var r=e.as,n=e.type,o=void 0===n?"h2":n,u=e.color,f=void 0===u?"text":u,h=e.fontSize,p=e.fontFamily,m=void 0===p?"body":p,b=e.fontWeight,g=void 0===b?"bold":b,y=e.lineHeight,O=void 0===y?"heading":y,Z=(0,i.Z)(e,l),v=null!==r&&void 0!==r?r:o,P=null!==h&&void 0!==h?h:d[o];return(0,c.tZ)(a.xu,s({as:v,ref:t,color:f,fontSize:P,fontFamily:m,fontWeight:g,lineHeight:O},Z))})),h=(0,o.yV)((function(e,t){return(0,c.tZ)(f,s({ref:t,as:"h1",type:"h1"},e))})),p=(0,o.yV)((function(e,t){return(0,c.tZ)(f,s({ref:t,as:"h2",type:"h2"},e))})),m=(0,o.yV)((function(e,t){return(0,c.tZ)(f,s({ref:t,as:"h3",type:"h3"},e))})),b=(0,o.yV)((function(e,t){return(0,c.tZ)(f,s({ref:t,as:"h4",type:"h4"},e))}));(0,o.yV)((function(e,t){return(0,c.tZ)(f,s({ref:t,as:"h5",type:"h5"},e))})),(0,o.yV)((function(e,t){return(0,c.tZ)(f,s({ref:t,as:"h6",type:"h6"},e))}))},5025:function(e,t,r){"use strict";r.d(t,{x:function(){return a}});var n=r(1163),i=r(3282),o=r(5944),a=function(){var e=(0,n.useRouter)();return(0,o.tZ)(i.I,{onClick:function(){return e.back()},direction:"left",children:"Back"})}},1077:function(e,t,r){"use strict";r.d(t,{f:function(){return a}});var n=r(8153),i=r(8547),o=r(5944),a=function(e){var t=e.navigator,r=e.gap,a=void 0===r?1:r,c=e.reversed,l=e.children;return(0,o.tZ)(i.o,{children:c?(0,o.BX)(o.HY,{children:[(0,o.tZ)(i.s,{columnSpan:{xs:12,md:t?8:12},children:(0,o.tZ)(n.Kq,{gap:a,children:l})}),t?(0,o.tZ)(i.s,{columnSpan:{xs:12,md:4,lg:3},columnStart:t?{lg:10}:void 0,children:t}):null]}):(0,o.BX)(o.HY,{children:[t?(0,o.tZ)(i.s,{columnSpan:{xs:12,md:4,lg:3},children:t}):null,(0,o.tZ)(i.s,{columnSpan:{xs:12,md:t?8:12},columnStart:t?{lg:5}:void 0,children:(0,o.tZ)(n.Kq,{gap:a,children:l})})]})})}},402:function(e,t,r){"use strict";r.d(t,{p:function(){return d}});var n=r(9499),i=r(8382),o=r(1008),a=r(7294),c=r(5944);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s=function(e){return(0,a.forwardRef)(e)},d={TradingName:s((function(e,t){return(0,c.tZ)(o.o,u(u({label:"Trading name",hint:"Details must match the name on your ABN registration",maxWidth:"xl",required:!0},e),{},{ref:t}))})),BusinessName:s((function(e,t){return(0,c.tZ)(o.o,u(u({label:"Business name",hint:"Legal entity name",maxWidth:"xl",required:!0},e),{},{ref:t}))})),ABN:s((function(e,t){return(0,c.tZ)(o.o,u(u({label:"Australian Business Number (ABN)",hint:"11 digits",maxWidth:"lg",required:!0},e),{},{ref:t}))})),ACN:s((function(e,t){return(0,c.tZ)(o.o,u(u({label:"Australian Company Number (ACN)",hint:"Required for trusts and companies. 9 digits",maxWidth:"xl",required:!0},e),{},{ref:t}))})),Address:s((function(e,t){return(0,c.tZ)(o.o,u(u({label:"Street address",hint:"Building and street",maxWidth:"xl",required:!0},e),{},{ref:t}))})),Suburb:s((function(e,t){return(0,c.tZ)(o.o,u(u({label:"Town, city or suburb",maxWidth:"lg",required:!0},e),{},{ref:t}))})),State:s((function(e,t){return(0,c.tZ)(o.o,u(u({label:"State or territory",maxWidth:"sm",required:!0},e),{},{ref:t}))})),Postcode:s((function(e,t){return(0,c.tZ)(o.o,u(u({label:"Postcode",maxWidth:"sm",required:!0},e),{},{ref:t}))})),Phone:s((function(e,t){return(0,c.tZ)(o.o,u(u({label:"Phone number",maxWidth:"md",required:!0},e),{},{ref:t}))})),Email:s((function(e,t){return(0,c.tZ)(o.o,u(u({label:"Email address",maxWidth:"xl",required:!0},e),{},{ref:t}))})),FirstName:s((function(e,t){return(0,c.tZ)(o.o,u(u({label:"First name",maxWidth:"xl",required:!0},e),{},{ref:t}))})),MiddleName:s((function(e,t){return(0,c.tZ)(o.o,u(u({label:"Middle name/s",maxWidth:"xl",required:!0},e),{},{ref:t}))})),LastName:s((function(e,t){return(0,c.tZ)(o.o,u(u({label:"Last name",maxWidth:"xl",required:!0},e),{},{ref:t}))})),BusinessRole:s((function(e,t){return(0,c.tZ)(i.P,u(u({label:"Your role in the business",options:[{label:"Owner",value:"owner"},{label:"Employee",value:"employee"}],required:!0},e),{},{ref:t}))})),Role:s((function(e,t){return(0,c.tZ)(i.P,u(u({label:"Role",placeholder:"Choose a role...",options:[{label:"Principal authority",value:"principal-authority"},{label:"Operations manager",value:"operations-manager"},{label:"Operations admin",value:"operations-admin"}],required:!0},e),{},{ref:t}))})),EstNO:s((function(e,t){return(0,c.tZ)(o.o,u(u({label:"Registered establishment number",hint:"This is the 4 digit registration number for the establishment",maxWidth:"md",required:!0},e),{},{ref:t}))})),Facility:s((function(e,t){return(0,c.tZ)(i.P,u(u({label:"Select a Facility",maxWidth:"xl",options:[{label:"Produce fresh processing",value:"produce-fresh-processing"},{label:"Produce fresh cold store",value:"produce-fresh-cold-store"}],required:!0},e),{},{ref:t}))}))}},6778:function(e,t,r){"use strict";r.d(t,{H1:function(){return f},H2:function(){return h},H3:function(){return p},H4:function(){return m},P:function(){return d},V:function(){return g}});var n=r(9499),i=r(8153),o=r(6439),a=r(9154),c=r(5944);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var s={maxWidth:"42rem"},d=function(e){return(0,c.tZ)(a.x,u(u({as:"p"},s),e))},f=function(e){return(0,c.tZ)(o.H1,u(u({},s),e))},h=function(e){return(0,c.tZ)(o.H2,u(u({},s),e))},p=function(e){return(0,c.tZ)(o.H3,u(u({},s),e))},m=function(e){return(0,c.tZ)(o.H4,u(u({},s),e))},b=function(e){return(0,c.tZ)(a.x,u(u({as:"p",fontSize:"md",color:"muted"},s),e))},g=function(e){var t=e.heading,r=e.intro,n=e.prelude,o=e.children;return(0,c.BX)(i.Kq,{gap:1.5,children:[void 0===n?(0,c.tZ)(f,{children:t}):(0,c.BX)(i.xu,{children:[(0,c.tZ)(a.x,{fontSize:"sm",color:"muted",fontWeight:"bold",lineHeight:"heading",children:n}),(0,c.tZ)(f,{children:t})]}),void 0===r?(0,c.tZ)(b,{children:o}):(0,c.BX)(c.HY,{children:[(0,c.tZ)(b,{children:r}),o]})]})}},5013:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return W}});var n,i=r(9499),o=r(4730),a=r(29),c=r(7794),l=r.n(c),u=r(2523),s=r(1077),d=r(8714),f=r(9154),h=r(6778),p=r(1163),m=r(5025),b=r(6573),g=r(402),y=r(8247),O=(n={},(0,i.Z)(n,"produce-fresh-processing","Produce Fresh Processing"),(0,i.Z)(n,"produce-fresh-cold-store","Produce Fresh Cold Store"),n),Z=r(7583),v=r(1282),P=r(7536),j=r(7294),x=r(870),w=r(5944),S=["role"];function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var B=v.db.users,W=function(){var e,t=(0,p.useRouter)(),r=(0,v.A$)("facility"),n=(e=O[r],(0,v.e3)("personID")),i=(0,v.aM)((function(){return B.get(null!==n&&void 0!==n?n:-1)}),[n]),c=(0,P.cI)({defaultValues:i}),D=c.register,W=c.handleSubmit,k=c.reset,E=(0,c.watch)("role");(0,j.useEffect)((function(){k(i)}),[k,i]);var N=function(){var e=(0,a.Z)(l().mark((function e(r){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.role,n=(0,o.Z)(r,S),e.next=3,B.put(q(q({},n),{},{mobile_phone:"",work_phone:"",status:"Pending",createdAt:(new Date).toDateString(),permissions:[{role:{role:r.role},businessID:-1}]}));case 3:t.push({pathname:(0,x.GA)("MP"),query:{addSuccess:!0}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,w.BX)(s.f,{gap:3,children:[(0,w.tZ)(m.x,{}),(0,w.BX)(s.f,{gap:1,children:[(0,w.tZ)(h.V,{heading:"Add person",children:"Provide the person's information to add them to management and control for this facility."}),(0,w.tZ)(f.x,{as:"p",color:"muted",fontSize:"xs",children:"All fields are required unless marked optional."})]}),(0,w.tZ)("form",{onSubmit:W(N),children:(0,w.BX)(b.R,{children:[(0,w.tZ)(g.p.Facility,q({label:"Select a Facility"},D("facility"))),(0,w.tZ)(g.p.FirstName,q({},D("first_name"))),(0,w.tZ)(g.p.LastName,q({},D("last_name"))),(0,w.tZ)(g.p.Email,q({label:"Email"},D("email_address"))),(0,w.BX)(u.eQ,{block:!0,hint:"Select a role to determine their permissions",label:"Role",required:!0,children:[(0,w.tZ)(u.Y8,q(q({},D("role")),{},{value:"operations-manager",children:"Operations manager"})),(0,w.tZ)(u.Y8,q(q({},D("role")),{},{value:"operations-admin",children:"Operations admin"})),(0,w.tZ)(u.Y8,q(q({},D("role")),{},{value:"occupier",children:"Occupier"}))]}),"operations-manager"===E?(0,w.BX)(s.f,{gap:1,children:[(0,w.tZ)(f.x,{as:"h3",fontSize:"lg",fontWeight:"bold",children:"Permissions"}),(0,w.tZ)(f.x,{as:"h4",fontSize:"sm",fontWeight:"bold",children:"This role can perform the following tasks on behalf of the business:"}),(0,w.tZ)(Z.Mr,{children:(0,w.BX)("ul",{children:[(0,w.tZ)("li",{children:"Propose or vary an arrangement"}),(0,w.tZ)("li",{children:"Add, vary or remove people from management and control"}),(0,w.tZ)("li",{children:"Add, vary or remove operations"}),(0,w.tZ)("li",{children:"View and manage audits"}),(0,w.tZ)("li",{children:"Request quota allocation"})]})}),(0,w.tZ)(f.x,{as:"h4",fontSize:"sm",fontWeight:"bold",children:"This role can't perform the following tasks on behalf of the business:"}),(0,w.tZ)(Z.Mr,{children:(0,w.tZ)("ul",{children:(0,w.tZ)("li",{children:"Sign-off on corrective actions"})})})]}):null,(0,w.tZ)(y.U,{children:"Submitting this initiates the process to add a person to management and control of this establishment, it does not guarantee this person will be approved."}),(0,w.BX)(d.hE,{children:[(0,w.tZ)(d.zx,{type:"submit",children:"Add Person"}),(0,w.tZ)(x.BG,{page:"MP",variant:"secondary",children:"Back"}),(0,w.tZ)(x.BG,{page:"TODO",variant:"tertiary",children:"Save and exit"})]})]})})]})}},4645:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage-people/add-person",function(){return r(5013)}])}},function(e){e.O(0,[2523,7583,216,9774,2888,179],(function(){return t=4645,e(e.s=t);var t}));var t=e.O();_N_E=t}]);